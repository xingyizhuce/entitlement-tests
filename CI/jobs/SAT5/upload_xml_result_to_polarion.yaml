- job-template:
    name: 'EntitlementSAT5_upload_xml_result_to_polarion'
    node: entitlement
    description: |
        Purpose: Upload SAT5 testing xml result to polarion.
    concurrent: true
    scm:
        - git:
            url: 'http://git.app.eng.bos.redhat.com/git/entitlement-tests.git'
            branches:
                - origin/master
            basedir: entitlement-tests
            git-config-name: 'ftan'
            git-config-email: 'ftan@redhat.com'
    parameters:
        - string:
            name: XML_URL
            default: 
            description:
    builders:
        - shell: |
            #!/bin/bash
            wget --no-check-certificate $XML_URL -O nosetests.xml
            touch *.xml

    publishers:
        - archive:
            artifacts: '*.xml'
            allow-empty: 'true'
        - ci-polarion-importer:
            files: 'nosetests.xml'
            wait: False
            mark-failed: True
            importer_url: 'https://polarion.engineering.redhat.com/polarion/import/xunit'
            user: 'platformqe_machine'
            password: 'polarion'
            provider-name: 'Red Hat UMB'
            override-topic: Consumer.rh-jenkins-ci-plugin.cb8a05ac-493c-42ee-9529-0aa113fc35ba.VirtualTopic.qe.ci.>
            timeout: '60'
    wrappers:
        - ansicolor
        - workspace-cleanup
        - timestamps

- project:
   name: Entitlement_polarion_project
   jobs:
    - EntitlementSAT5_upload_xml_result_to_polarion
